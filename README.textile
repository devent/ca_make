* !https://anrisoftware.com/projects/attachments/download/217/apache2.0-small.gif! (© 2016 Erwin Müller)
* "Source github.com":https://github.com/devent/ca_make
* @git@anrisoftware.com:ca_make.git@
* @git@github.com:devent/ca_make.git@

h1. CA Make

This project contains scripts to create a simple Certificate Authority that can issue and sign certificates and keeps track of them by a simple serial number system. The make script will download the tools needed to create certificates and to sign them. The repository should be cloned and a specific branch for a specific CA should be created.

<pre>
git clone git@github.com:devent/ca_make.git
git checkout -b nttdata
... create server certificates
</pre>

h2. Introduction

The project creates a root CA and an intermediate CA that can create server certificates and sign them. It can also revoke server certificates and regenerate the certificate revocation lists. Basic functions can be done by the main @Makefile@ in the root directory, more advanced functions are located in the intermediate CA directory @Makefile@.

* @./Makefile@
* @./root/Makefile@
* @./root/openssl.cnf@
* @./intermediate/Makefile@
* @./intermediate/openssl.cnf@

h2. Configuration

The @root/openssl.cnf@ and @intermediate/openssl.cnf@ file contains the main configuration of the Openssl client. The top of the file contains some default values to create server certificates and should be changed to one's own needs.

<pre>
# Change those for you own needs.
KEY_SIZE               = 2048
KEY_COUNTRY            = DE
KEY_PROVINCE           = BAVARIA
KEY_CITY               = MUNICH
KEY_ORG                = ERWIN MUELLER
KEY_ORGUNIT            = ERWIN MUELLER Certificate Authority
KEY_COMMON_NAME        = ERWIN MUELLER Root CA
KEY_EMAIL              = admin@muellerpublic.de

# Set the CRL distribution URL.
CRL_URL                = URI:https://muellerpublic.de/intermediate.crl.pem

# Set the OCSP distribution URL.
OCSP_URL               = OCSP;URI:http://ocsp.muellerpublic.de
</pre>

h2. Generated Files

|_.File|_.Description|
|certs/|Directory of the signed certificates.|
|certs/ca_cert.pem|The root CA certificate.|
|certs/ca_chain_cert.pem|The intermediate CA chain certificate.|
|certs/intermediate_cert.pem|The intermediate CA certificate.|
|certs/ocsp.muellerpublic.de_cert.pem|The OCSP certificate.|
|crl/|Directory of the certificate revocation lists.|
|csr/|Directory of the certificate requests.|
|passwords/|Directory of the private key passphrases.|
|private/|Directory of the private keys.|
|private/ca_key.pem|The root CA private key.|
|private/intermediate_key.pem|The intermediate CA private key.|
|private/ocsp.muellerpublic.de_key.pem|The OCSP private key.|

h2. Usage

* @make help@

Shows the available targets with a description.

* @make@

Creates the root and the intermediate CA.

* @make server SERVER_NAME=test.muellerpublic.de@

Creates the server certificate.

* @make revoke_server SERVER_NAME=test.muellerpublic.de@

Revokes the server certificate.

h2. License

Licensed under a "Apache 2.0 License.":http://www.apache.org/licenses/LICENSE-2.0 Permissions beyond the scope of this license may be available at @erwin.mueller@deventm.org@ or @erwin.mueller@nttdata.com@.
